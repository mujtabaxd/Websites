<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <script src="https://www.google.com/recaptcha/api.js?render=6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI"></script>

</head>

<body>
  <!-- contact form demo container -->
  <section style="margin: 50px 20px;">
    <div style="max-width: 768px; margin: auto;">

      <!-- contact form -->
      <div class="card">
        <h2 class="card-header">reCaptcha Check</h2>
        <div class="card-body">
          <form class="contact_form" method="post" action="verify.php">

            <!-- form fields -->
            <div class="row">
              <div class="col-12 form-group">
                <textarea name="message" class="form-control" rows="5" placeholder="Message" required></textarea>
              </div>

              <!-- form message prompt -->
              <div class="row">
                <div class="col-12">
                  <div class="contact_msg" style="display: none">
                    <p>Your message was sent.</p>
                  </div>
                </div>
              </div>

              <div class="col-12">
                <input type="submit" value="Submit Form" class="btn btn-success" name="post">
              </div>

              <!-- hidden reCaptcha token input -->
              <input type="hidden" id="token" name="token">
            </div>

          </form>
        </div>
      </div>

    </div>
  </section>
  <script>
    grecaptcha.ready(function () {
      grecaptcha.execute('your-site-key-here', { action: 'homepage' }).then(function (token) {
        // console.log(token);
        document.getElementById("token").value = token;
      });
      // refresh token every minute to prevent expiration
      setInterval(function () {
        grecaptcha.execute('your-site-key-here', { action: 'homepage' }).then(function (token) {
          console.log('refreshed token:', token);
          document.getElementById("token").value = token;
        });
      }, 60000);

    });
  </script>

  <!-- References for the optional jQuery function to enhance end-user prompts -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="form.js"></script>
</body>