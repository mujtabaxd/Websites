<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <script src="https://www.google.com/recaptcha/api.js?render=6Le8iRAhAAAAAPMXtuCuqxI07KZ48Vsa2GSIRYwJ"></script>

</head>

<body>
  <!-- contact form demo container -->
  <section style="margin: 50px 20px;">
    <div style="max-width: 768px; margin: auto;">

      <!-- contact form -->
      <div class="card">
        <h2 class="card-header">reCaptcha Check</h2>
        <div class="card-body">
          <form class="contact_form" method="post" action="verify.php">
            <!-- form fields -->
            <div class="row">
              <div class="col-12">
                <input type="submit" value="Fire Request" class="btn btn-success" name="post">
              </div>

              <!-- hidden reCaptcha token input -->
              <input type="hidden" id="token" name="token">
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
  <script>
    grecaptcha.ready(function () {
      grecaptcha.execute('6Le8iRAhAAAAAPMXtuCuqxI07KZ48Vsa2GSIRYwJ', { action: 'homepage' }).then(function (token) {
        // console.log(token);
        document.getElementById("token").value = token;
      });
      // refresh token every minute to prevent expiration
      setInterval(function () {
        grecaptcha.execute('6Le8iRAhAAAAAPMXtuCuqxI07KZ48Vsa2GSIRYwJ', { action: 'homepage' }).then(function (token) {
          console.log('Refreshed Token:', token);
          document.getElementById("token").value = token;
        });
      }, 60000);

    });
  </script>

  <!-- References for the optional jQuery function to enhance end-user prompts -->
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="form.js"></script>
</body>